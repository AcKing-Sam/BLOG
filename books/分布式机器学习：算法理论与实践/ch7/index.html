
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../ch6/">
      
      
        <link rel="next" href="../ch8/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.18">
    
    
      
        <title>ch7 - AcKing's Ideas</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="AcKing&#39;s Ideas" class="md-header__button md-logo" aria-label="AcKing's Ideas" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AcKing's Ideas
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ch7
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
            
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_3">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../courses/open_mlsys/ch2/" class="md-tabs__link">
        courses
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../blogs/vector_db/something%20about%20vector%20db/" class="md-tabs__link">
        blogs
      </a>
    </li>
  

  

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB/ch1/" class="md-tabs__link md-tabs__link--active">
        books
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="AcKing&#39;s Ideas" class="md-nav__button md-logo" aria-label="AcKing's Ideas" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    AcKing's Ideas
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
      
      
      
        <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
          courses
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          courses
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_1" >
      
      
      
        <label class="md-nav__link" for="__nav_1_1" id="__nav_1_1_label" tabindex="0">
          open mlsys
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1_1">
          <span class="md-nav__icon md-icon"></span>
          open mlsys
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/open_mlsys/ch2/" class="md-nav__link">
        chapter 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/open_mlsys/ch3/" class="md-nav__link">
        chapter 3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/open_mlsys/ch4/" class="md-nav__link">
        chapter 4
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/open_mlsys/ch6/" class="md-nav__link">
        chapter 6
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/open_mlsys/ch7/" class="md-nav__link">
        chapter 7
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/open_mlsys/ch8/" class="md-nav__link">
        chapter 8
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/open_mlsys/ch9/" class="md-nav__link">
        chapter 9
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/open_mlsys/ch10/" class="md-nav__link">
        chapter 10
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/open_mlsys/ch11/" class="md-nav__link">
        chapter 11
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_2" >
      
      
      
        <label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="0">
          CSCI_5120
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1_2">
          <span class="md-nav__icon md-icon"></span>
          CSCI_5120
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/CSCI_5120/Apriori/" class="md-nav__link">
        Apriori
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/CSCI_5120/fp_tree/" class="md-nav__link">
        FP-tree
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/CSCI_5120/CLIQUE/" class="md-nav__link">
        CLIQUE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/CSCI_5120/vp_tree/" class="md-nav__link">
        VP-tree
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          blogs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          blogs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_1" >
      
      
      
        <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
          vector_db
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          vector_db
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/vector_db/something%20about%20vector%20db/" class="md-nav__link">
        something about vector db
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          storage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          storage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/storage/parquet/" class="md-nav__link">
        parquet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/storage/data%20lake/" class="md-nav__link">
        data lake
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/storage/Optimization%20for%20ZMQ/" class="md-nav__link">
        optimization for ZMQ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          linux
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/linux/ld%E5%92%8Cld.so%E7%9A%84%E5%8C%BA%E5%88%AB/" class="md-nav__link">
        ld和ld.so的区别
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/linux/futex%E9%94%81%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E5%BA%94%E7%94%A8/" class="md-nav__link">
        futex锁原理及其应用
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
      
      
      
        <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
          mlsys
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          mlsys
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/mlsys/mlsys_summary/" class="md-nav__link">
        综述
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/mlsys/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%B3%BB%E7%BB%9F/" class="md-nav__link">
        D-DNN-SYS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          books
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          books
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_1" >
      
      
      
        <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
          程序员的自我修养
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          程序员的自我修养
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB/ch1/" class="md-nav__link">
        ch1
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          分布式机器学习：算法理论与实践
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          分布式机器学习：算法理论与实践
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ch1/" class="md-nav__link">
        ch1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ch3/" class="md-nav__link">
        ch3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ch4/" class="md-nav__link">
        ch4
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ch5/" class="md-nav__link">
        ch5
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ch6/" class="md-nav__link">
        ch6
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          ch7
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        ch7
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    基本概述
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    通信内容
  </a>
  
    <nav class="md-nav" aria-label="通信内容">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    参数或参数的更新
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    计算的中间结果
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discuss" class="md-nav__link">
    discuss
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    通信的拓扑结构
  </a>
  
    <nav class="md-nav" aria-label="通信的拓扑结构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mapreduceaiireduce" class="md-nav__link">
    基于迭代式 MapReduce/AIIReduce 的通信拓扑
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    基于参数服务器的通信拓扑
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    基于数据流的通信拓扑
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    通信的步调
  </a>
  
    <nav class="md-nav" aria-label="通信的步调">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    同步通信
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    异步通信
  </a>
  
    <nav class="md-nav" aria-label="异步通信">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    多机的异步通信
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    多线程的异步通信
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    均衡
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    通信频率
  </a>
  
    <nav class="md-nav" aria-label="通信频率">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    时域滤波
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    空域滤波
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ch8/" class="md-nav__link">
        ch8
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ch9/" class="md-nav__link">
        ch9
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    基本概述
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    通信内容
  </a>
  
    <nav class="md-nav" aria-label="通信内容">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    参数或参数的更新
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    计算的中间结果
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discuss" class="md-nav__link">
    discuss
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    通信的拓扑结构
  </a>
  
    <nav class="md-nav" aria-label="通信的拓扑结构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mapreduceaiireduce" class="md-nav__link">
    基于迭代式 MapReduce/AIIReduce 的通信拓扑
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    基于参数服务器的通信拓扑
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    基于数据流的通信拓扑
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    通信的步调
  </a>
  
    <nav class="md-nav" aria-label="通信的步调">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    同步通信
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    异步通信
  </a>
  
    <nav class="md-nav" aria-label="异步通信">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    多机的异步通信
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    多线程的异步通信
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    均衡
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    通信频率
  </a>
  
    <nav class="md-nav" aria-label="通信频率">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    时域滤波
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    空域滤波
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="_1">通信机制<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<h2 id="_2">基本概述<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>分布式机器学习与单机版机器学习最大的区别在于，它利用了多个工作节点同时训练、相互合作来加速学习过程。既然需要相互合作，那么通信就成为必不可少的环节。</p>
<p>不过，分布式系统中的网络传输速度往往受限，导致通信常常成为分布式系统的瓶颈举一个简单的例子：如果某个任务中计算与通信的时间占比为1:1，那么根据<strong>阿姆达尔定律</strong>(Amdahl'slaw)，无论使用多少台机器做并行运算，其加速比都不会超过两倍。因此，分布式机器学习的关键是设计通信机制，从而降低通信与计算的时间比例，更加高效地训练出高精度的模型。</p>
<p>然而，与一般的分布式计算相比，设计分布式机器学习中的通信机制更具挑战性。首先，训练机器学习模型通常使用迭代式的优化算法，<strong>迭代次数可高达数百次甚至数万次。这就决定了分布式机器学习的通信频率很高。</strong>其次，分布式机器学习往往处理大数据，训练大模型。各个工作节点之间需要进行通信，以获取模型(或模型更新) 信息，或者针对每个数据样本的中间计算结果。这就决定了分布式机器学习的通信数据量很大。因此，简单地采用传统的并行方法处理分布式机器学习任务，往往难以达到理想的效果。</p>
<p>不过，机器学习采用的数值优化算法具有较高的容错性，如果我们在设计通信机制的时候充分利用机器学习算法的这一特点，就有可能取得单纯使用系统优化方法难以取得的效果。
为了实现这个目的，我们在设计分布式机器学习的通信机制时，既需要有系统层面的考虑，也需要有算法层面的考虑。为了高效通信，分布式机器学习往往需要在算法和系统之间取得平衡。</p>
<h2 id="_3">通信内容<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<p>通信的内容与并行方式有关。在前面的章节中我们曾经提到，无论是数据并行还是模型并行，都需要在各个工作节点之间进行相互通信(计算并行由于使用共享内存，各节点之间无须进行网络通信)。在数据并行中，各个工作节点利用本地的训练数据进行模型训练，为了达到全局的一致性，它们需要进行通信以获取模型的参数。在模型并行中，各个工作节点利用同一份数据对模型的不同部分进行训练，每个节点要依赖其他节点的中间计算结果，因此系统需要进行通信以获取计算的中间结果。这两种不同的并行机制会进一步衍生出具体的并行算法逻辑，不同的算法逻辑下通信的内容不尽相同，但总体而言，通信的内容可以分为参数(或参数的更新)和计算的中间结果两类。</p>
<h3 id="_4">参数或参数的更新<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>在基于数据并行的分布式机器学习中，工作节点各自完成本地的学习任务，然后互相交流各自对模型的修改，或者直接同步各自的模型。因此，在此情形下通信的内容是模型的参数或者参数的更新。在很多机器学习任务中，参数以及参数的更新是逐渐稀疏的，同时在训练过程中，随着模型趋于收敛，参数的更新也会越来越少，这都会使得通信量相对较少(或越变越少)。因此进行通信以获取参数和参数更新是一个比较高效的选择。</p>
<p>下面我们来看一个例子。</p>
<p><img src="https://blog-img-acking.oss-cn-beijing.aliyuncs.com/img/202308240919351.png" alt="image-20230824091935246" style="zoom:67%;" /></p>
<p>上图展示了K个工作节点针对一个全局神经网络模型进行数据并行的分布式训练过程。每个工作节点都有各自的输入数据，并且可以从不同的模型初始值出发，利用局部数据对本地模型参数进行更新。当本地参数完成一轮更新后，所有的节点会将本地参数(或参数更新)序列化(即图中的iw=(w，·，w)等内容)，并发往全局模型。全局模型基于所有工作节点的信息，完成参数的聚合，并生成新的全局模型参数。在此之后，通过网络通信将新的全局模型发送回各个工作节点更新它们的本地模型。在这种模式下，通信的内容是各个局部模型的参数或者参数更新，以及全局模型的参数。</p>
<h3 id="_5">计算的中间结果<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>在基于模型并行的分布式机器学习中，通信内容往往是计算的中间结果。模型并行将一个完整的模型切分成若干小份，让每个工作节点负责其中一部分，共同协作来完成模型的训练。因为各个工作节点所负责的模型参数没有重叠，所以不需要进行通信以获取模型参数。然而，为了完成并行训练，不同的工作节点之间需要进行通信以获取相互依赖的中间计算结果。</p>
<h3 id="discuss">discuss<a class="headerlink" href="#discuss" title="Permanent link">&para;</a></h3>
<p>本节简述了分布式机器学习中通信的内容。不同的并行模式下，通信的内容有所差别。但万变不离其宗，通信的目的是让工作节点互相交流它们各自的学习进展，不论是模型参数本身还是训练过程中的中间结果，本质上都是对于各个工作节点所获得的学习进展的表达方法。通过相互通信使总体的模型向正确的方向更新。</p>
<p>以上概括了最常见的通信内容。在实践中，还存在其他情况。例如，人们也在研究<strong>基于数据交互的数据并行机器学习</strong>。在这种方法中，各个工作节点找到本地数据中最重要的那一部分样本(比如支持向量机训练过程中的支持向量，Boosting 算法中权重最大的样本等)，并且将这些重要的样本在各个节点之间进行通信，使得不同节点可以快速获得全局数据中的重要部分，促进每个局部模型协同地、快速地收敛到最优模型。</p>
<p>除了通信获取重要样本以外，还可以通信获取样本的预测值。这种情况通常与集成学习相互配合。<strong>当每个工作节点按照自己的本地模型对样本进行预测之后，多个节点可以通过集成学习得到对于样本更好的预测值，并且以此为参考，反过来更新各自的模型参数。</strong></p>
<blockquote>
<p>此外，通信的目的也可以变得更加多元。我们甚至不需要让各个工作节点完全一致，而是通过控制通信的程度在某种意义上保有各个工作节点的个性。如同六脉神剑.可以一个人修完，也可以众人各修一脉。通信的目的是不断突出各个工作节点在某些方面的判决能力，直到最终各个节点上的模型在各自擅长的问题或擅长处理的部分样本上达到比较高的精度，再综合所有工作节点的判决能力，则可以在整个样本空间更加出色地完成预测任务。目前这方面的具体研究工作还比较少，但却是一个非常值得深入探索的研究方向。</p>
</blockquote>
<h2 id="_6">通信的拓扑结构<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h2>
<p>通信的拓扑结构是指分布式机器学习系统中各个工作节点之间的连接方式。拓扑结构一般分为物理拓扑结构和逻辑拓扑结构两种，本节将主要讨论分布式机器学习中通信的逻辑拓扑结构。</p>
<p>通信拓扑结构的演化与分布式机器学习的发展历史有关。早期，当人们用于训练模型的数据量还不够大，预测模型还不够复杂时，分布式机器学习常常利用已有的分布式计算框架来实现通信，如消息通信接口(MPI)或者MapReduce计算框架。这类通用的计算框架，有利于快速实现分布式机器学习任务，但也有本身的局限性，例如，使用MPI的方式，各个节点之间仅支持同步计算。随着数据量增大，模型变得越来越复杂人们设计了参数服务器这样的分布式机器学习系统。通过采用二部图的网络拓扑结构，参数服务器可以支持基于异步通信的并行训练。后来，随着深度学习的普及，机器学习系统将计算和通信统一抽象为一个数据图模型，通信可以在任意两个相连的图节点之间产生。</p>
<h3 id="mapreduceaiireduce">基于迭代式 MapReduce/AIIReduce 的通信拓扑<a class="headerlink" href="#mapreduceaiireduce" title="Permanent link">&para;</a></h3>
<p>MapReduce将程序抽象为两个主要操作:Map操作完成数据分发和并行处理，Reduce 操作完成数据的全局同步和归约。利用MapReduce，工程师只需要使用简单的原语就可以完成大规模数据的并行处理。当我们把MapReduce的概念应用到分布式机器学习中，Map 操作定义了数据分发以及在本地工作节点上的计算，而Reduce操作则定义了全局参数的聚合过程。利用迭代式MapReduce(IMR)操作可以实现典型的数据并行模式下的同步分布式机器学习算法。</p>
<p><img src="https://blog-img-acking.oss-cn-beijing.aliyuncs.com/img/202308240928038.png" alt="image-20230824092820968" style="zoom:67%;" /></p>
<p><strong><em> AllReduce</em></strong></p>
<p><img src="https://blog-img-acking.oss-cn-beijing.aliyuncs.com/img/202308240931090.png" alt="image-20230824093107954" style="zoom:67%;" /></p>
<p>总体来说，<strong>不论是IMR还是AIIReduce的模式都只能支持同步通信</strong>，并且从接口调用上可以看出，各个工作节点使用的逻辑都是统一的，同步时各个工作节点提供的信息都必须是针对同一组参数的。这也就暗示着要求每个工作节点能够处理完整的模型，这点对于模型规模很大的问题不太适用。</p>
<h3 id="_7">基于参数服务器的通信拓扑<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>随着分布式机器学习的不断发展，系统需要处理越来越多的数据和越来越大的模型，这就带来了新的问题和挑战。首先，当系统中并行的工作节点越来越多，且计算性能不均衡时，采用IMR或AIIReduce机制的分布式系统的训练速度往往取决于系统中最慢的节点，而更加严重的情况是，如果系统中有的工作节点不响应了(比如硬盘出现故障或者网卡出现问题)，那么整个系统只能停下来，无法继续工作。其次，当机器学习任务中的模型参数非常多，已经超出了单个机器的内存容限时，IMR或AIIReduce架构也将无法胜任。最后，近些年来研究人员提出了很多异步算法，这些算法无法由同步计算的框架实现。为了解决这些挑战，一种新型的分布式机器学习框架应运而生，那就是基于参数服务器的框架。</p>
<p><img src="https://blog-img-acking.oss-cn-beijing.aliyuncs.com/img/202308240935528.png" alt="image-20230824093530489" style="zoom:67%;" /></p>
<p>在参数服务器框架中，系统中的所有节点被逻辑上分为工作节点(worker) 和服务器节点(server)。各个工作节点主要负责处理本地的训练任务，并通过客户端接口与参数服务器通信，从参数服务器处获取最新的模型参数，或者将本地训练产生的模型(或模型更新)发送到参数服务器。参数服务器框架中的灵魂是参数服务器(ParameterServer，PS)本身。PS可以由单个服务器担任，也可以由一组服务器共同担任。可以看出，在逻辑上，参数服务器框架采用了二部图的通信拓扑结构。其中，工作节点和服务器节点之间彼此通信，而工作节点内部则无须通信。当服务器仅有一台时便退化成为一个星形拓扑结构。
这种通信拓扑将各个工作节点之间的计算相互隔离，取而代之的是工作节点与参数服务器之间的交互。利用参数服务器提供的参数存取服务，各个工作节点可以独立于彼此工作。在基于参数服务器的分布式机器学习中，工作节点对全局参数的访问请求通常分为获取参数(PULL)和更新参数(PUSH)两类。服务器节点响应工作节点的请求对参数进行存储和更新。有了参数服务器，机器学习的步调既可以是同步的，也可以是异步的，甚至是同步和异步混合的。</p>
<h3 id="_8">基于数据流的通信拓扑<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>在前面介绍的几种通信拓扑中，各个工作节点的运行逻辑是基本一致的，因此比较适合基于数据并行的分布式机器学习。当我们进行基于模型并行的分布式机器学习时则需要把不同类型的计算(例如不同子模型的更新)放置在不同的工作节点上。近些年来，人们设计了基于数据流的分布式机器学习系统。在这种系统中，计算被描述为一个有向无环的数据流图。图中的每个节点进行数据处理或者计算，每条边代表数据的流动。当两个节点位于两台不同的机器上时，它们之间便会进行通信。</p>
<p>下图给出了一个工作节点逻辑的示例，每个节点实际上有两个通信通道:控制消息流和计算数据流。</p>
<p><img alt="" src="https://blog-img-acking.oss-cn-beijing.aliyuncs.com/img/202308240938682.png" /></p>
<p>其中，计算数据流主要负责接收模型训练时所需要的数据、模型参数等，再经过工作节点内部的计算单元，产生输出数据(这里的数据可以是中间计算结果，也可以是参数更新)，按需提供给下游的工作节点。</p>
<p>控制消息流决定了工作节点应该接收什么数据，接收的数据是否已经完整，自己所要做的计算是否完成，是否可以让下游节点继续计算等。在工作节点定义时，需要指定工作节点的状态转换流程，从而在需要的时候生成一些信息，通过控制消息流通知后续节点准备进入消息接收和计算的状态。</p>
<p>其实数据流图是个很宽泛的概念，MapReduce和参数服务器的流程也可以用数据流图来表达。图a描述了如何将参数服务器纳人数据流图中。如图所示，参数服务器只是作为数据流模式中一个具有数据收集和整合能力的工作节点。图中设备A、设备B设备C都是用来完成本地计算的工作节点，而参数设备就是参数服务器。另外，利用数据流图，可以定义一些更加复杂的分布式逻辑，比如，图b就给出了另外一种数据流图，其中前半部分定义了基于参数服务器的数据并行逻辑，而后半部分则定义了将模型切割开来的模型并行逻辑。</p>
<p><img src="https://blog-img-acking.oss-cn-beijing.aliyuncs.com/img/202308240939400.png" alt="image-20230824093955332" style="zoom:67%;" /></p>
<p><img src="https://blog-img-acking.oss-cn-beijing.aliyuncs.com/img/202308240940960.png" style="zoom:67%;" /></p>
<h2 id="_9">通信的步调<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h2>
<p>分布式机器学习中的各个工作节点，既相互独立地完成各自的训练子任务，又需要彼此通信协调合作。<strong>为了更好地进行协调，我们需要控制系统中各个工作节点的步调种方式是要求所有的工作节点以同样的步调进行训练，这种通信模式称为同步通信。</strong></p>
<p>采用同步通信的方式可以使多个工作节点上的模型完全一致，在许多情况下，同步的通信步调能够保证分布式算法与单机算法的等价性，从而利于算法的分析和调试。但这需要各个工作节点之间彼此等待，造成计算资源闲置。因而这种方式具有算法上的优势，但有系统上的劣势。</p>
<p>而另一种方式则对所有工作节点的步调是否一致没有任何要求，称为异步通信。采用异步通信的方式时，各个机器可以按照自己的步调训练，无须彼此等待，从而最大化计算资源的利用率。但这种方式会使得各个工作节点之间的模型彼此不一致，存在延迟的问题。因而这种方式具有系统上的优势，但有算法上的劣势。在这两种极端的通信步调中间，还存在着一种折中的方式、以平衡同步和异步的优缺点。</p>
<h3 id="_10">同步通信<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p><img src="https://blog-img-acking.oss-cn-beijing.aliyuncs.com/img/202308240944259.png" alt="image-20230824094420196" style="zoom:67%;" /></p>
<h3 id="_11">异步通信<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<p><img src="https://blog-img-acking.oss-cn-beijing.aliyuncs.com/img/202308240945615.png" alt="image-20230824094502545" style="zoom:67%;" /></p>
<h4 id="_12">多机的异步通信<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h4>
<p>在多机异步通信系统中存在两种逻辑角色：本地工作节点 (worker) 和参数服务器节点(parameter server)。在学习的过程中，每个工作节点基于本地样本计算出参数更新(例如梯度)，而参数服务器节点则负责保存和管理全局参数。</p>
<p>在这样的框架中，各个工作节点之间是不需要相互通信的，因此它们可以完全按照自己的速度进行本地的模型训练，当完成一次本地的参数更新之后，直接通过参数服务器的 API，将更新推送到全局模型，随后就可以毫无顾忌地继续进行本地的下一轮参数更新。</p>
<p>有一个问题值得注意，异步通信虽然可以避免无必要的等待，但是却可能引发“延迟”问题。因为各个工作节点没有全局同步，它们的步调可能会相差很大。例如，某个工作节点速度很快，它已经在全局模型的基础上往前训练了 100 轮;而另外一个工作节点速度慢，它才在同一个全局模型的基础上往前训练了1轮。那么，当后者把一个很陈旧的局部模型(或其梯度) 写入参数服务器时，很可能会减慢全局模型的收敛速率。因此，有很多研究人员试图发明新的算法来解决“延迟”问题。</p>
<h4 id="_13">多线程的异步通信<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<p>当数据规模不太大时，大家通常会选择利用单机的多线程并行处理能力，而不是借助计算机集群来实现分布式计算。由于内存访问的速度远超过网络传输的速度，因而在规模不大时，这样并行所需要的时间更少。</p>
<p>在这类单机多线程并行的学习过程中，有多个线程同时访问模型参数，原则上需要对参数加锁来控制多线程访问中的冲突问题。然而，由于参数的更新速度很快，锁的获取所花费的时间在此类机器学习任务中是非常可观的，这往往会导致多线程的并行学习得不到理想的加速比。为了解决这个问题，人们提出了Hogwild!算法]。在Hogwild!算法中，各个工作线程都直接无锁(lock-free)地读取和写入最新的模型及其更新。可以证明，在优化目标为凸函数且模型更新比较稀疏的情况下，异步无锁的写人不会对收敛性造成本质影响。因此、我们可以比较放心地使用多线程异步通信来实现快速的单机并行训练。</p>
<p>这类方法能够有效利用单个工作节点上的多核处理器和内存资源进行高性能的本地学习。但是随着训练数据的继续增加，单机的计算能力还是会逊色于多机集群，因此大多数并行框架是工作在多机集群环境下的。实践中，通常会结合单机共享内存的本地加速方法和多机同步或异步的分布式机制共同完成大规模的机器学习任务。</p>
<h3 id="_14">均衡<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<p>延时同步并行(StaleSynchronous ParallelSSP)</p>
<p>在实际的应用中，我们往往会采用一个相对同质化的集群(各个机器的计算性能和网络性能都趋于相同，并且相对稳定)，并且不是所有时候都会有非常大量的节点参与运算。这时各个节点之间不存在非常明显的速度差异，偶尔有的机器快一点，有的机器慢一点，但是这种快慢变化大都是随机的，从相当长的一段时间来看，各个工作节点的平均速度应该趋于相同。在这种情况下，如果让各个工作节点异步执行，并且加上一定的控制逻辑，可能就不会出现之前那种令人担忧的情形了。</p>
<p>SSP 正是针对这种场景设计出来的。它的核心思想是控制最快和最慢节点之间相差的迭代次数不超过预设的阙值。下图对SSP的流程给出了形象的描述。</p>
<p><img alt="image-20230824094930919" src="https://blog-img-acking.oss-cn-beijing.aliyuncs.com/img/202308240949993.png" /></p>
<p>在图中，阈值设为3，工作节点1是其中运算比较快的工作节点，而工作节点2是运算比较慢的工作节点。在工作节点1完成第6次更新的时候，工作节点2还在进行第3次更新。这时工作节点1已经领先太多，或者反过来说工作节点2所进行的更新的延迟太大了。这将会触发 SSP 算法中的等待机制。也就是说，此时工作节点1的最新参数请求将会被挂起，直到工作节点2到达第4次迭代位置才会解冻。在SSP的逻辑控制下，只要各个工作节点的迭代次数的差不超过预设的阙值，则各个节点的运算就可以独立进行，不互相干扰。但是一旦迭代次数差异太大就会触发一些等待，避免产生过大的延迟。</p>
<p>同步、异步之间的平衡还有很多实现方法，比如可以不要求最快的工作节点进行等待，而是维持一个全局时钟，当发现某些工作节点的更新太陈旧时，就将其丢弃并将此工作节点的当前模型刷新成参数服务器上的最新模型。这样就既能保证有限的延迟，同时也可以让快的工作节点全速前进。</p>
<h2 id="_15">通信频率<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h2>
<p>把通信频率分为时间频率和空间频率两种。其中，时间频率主要指通信的频次间隔，而空间频率主要指通信的内容大小。相应地，优化通信频率可以从两方面进行，即时域滤波和空域滤波。</p>
<h3 id="_16">时域滤波<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<p>增加通信间隔</p>
<p>非对称的推送与获取</p>
<p>计算和传输流水线</p>
<p><img alt="image-20230824095814282" src="https://blog-img-acking.oss-cn-beijing.aliyuncs.com/img/202308240958328.png" /></p>
<h3 id="_17">空域滤波<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<p>模型过滤</p>
<p>模型低秩化处理</p>
<p>模型量化</p>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.top", "search.suggest", "search.highlight", "navigation.expand", "search.share"], "search": "../../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>