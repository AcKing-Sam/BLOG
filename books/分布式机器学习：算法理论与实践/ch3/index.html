
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../ch1/">
      
      
        <link rel="next" href="../ch4/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.18">
    
    
      
        <title>ch3 - AcKing's Ideas</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="AcKing&#39;s Ideas" class="md-header__button md-logo" aria-label="AcKing's Ideas" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AcKing's Ideas
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ch3
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
            
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_3">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../courses/open_mlsys/ch2/" class="md-tabs__link">
        courses
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../blogs/vector_db/something%20about%20vector%20db/" class="md-tabs__link">
        blogs
      </a>
    </li>
  

  

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB/ch1/" class="md-tabs__link md-tabs__link--active">
        books
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="AcKing&#39;s Ideas" class="md-nav__button md-logo" aria-label="AcKing's Ideas" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    AcKing's Ideas
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
      
      
      
        <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
          courses
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          courses
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_1" >
      
      
      
        <label class="md-nav__link" for="__nav_1_1" id="__nav_1_1_label" tabindex="0">
          open mlsys
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1_1">
          <span class="md-nav__icon md-icon"></span>
          open mlsys
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/open_mlsys/ch2/" class="md-nav__link">
        chapter 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/open_mlsys/ch3/" class="md-nav__link">
        chapter 3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/open_mlsys/ch4/" class="md-nav__link">
        chapter 4
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/open_mlsys/ch6/" class="md-nav__link">
        chapter 6
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/open_mlsys/ch7/" class="md-nav__link">
        chapter 7
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/open_mlsys/ch8/" class="md-nav__link">
        chapter 8
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/open_mlsys/ch9/" class="md-nav__link">
        chapter 9
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/open_mlsys/ch10/" class="md-nav__link">
        chapter 10
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/open_mlsys/ch11/" class="md-nav__link">
        chapter 11
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_2" >
      
      
      
        <label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="0">
          CSCI_5120
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1_2">
          <span class="md-nav__icon md-icon"></span>
          CSCI_5120
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/CSCI_5120/Apriori/" class="md-nav__link">
        Apriori
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/CSCI_5120/fp_tree/" class="md-nav__link">
        FP-tree
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          blogs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          blogs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_1" >
      
      
      
        <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
          vector_db
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          vector_db
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/vector_db/something%20about%20vector%20db/" class="md-nav__link">
        something about vector db
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          storage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          storage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/storage/parquet/" class="md-nav__link">
        parquet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/storage/data%20lake/" class="md-nav__link">
        data lake
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          linux
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/linux/ld%E5%92%8Cld.so%E7%9A%84%E5%8C%BA%E5%88%AB/" class="md-nav__link">
        ld和ld.so的区别
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/linux/futex%E9%94%81%E5%8E%9F%E7%90%86%E5%8F%8A%E5%85%B6%E5%BA%94%E7%94%A8/" class="md-nav__link">
        futex锁原理及其应用
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
      
      
      
        <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
          mlsys
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          mlsys
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/mlsys/mlsys_summary/" class="md-nav__link">
        综述
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../blogs/mlsys/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%B3%BB%E7%BB%9F/" class="md-nav__link">
        D-DNN-SYS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          books
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          books
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_1" >
      
      
      
        <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
          程序员的自我修养
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          程序员的自我修养
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB/ch1/" class="md-nav__link">
        ch1
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          分布式机器学习：算法理论与实践
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          分布式机器学习：算法理论与实践
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ch1/" class="md-nav__link">
        ch1
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          ch3
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        ch3
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    基本流程
  </a>
  
    <nav class="md-nav" aria-label="基本流程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    数据与模型划分模块
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    单机优化模块
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    通信模块
  </a>
  
    <nav class="md-nav" aria-label="通信模块">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    通信内容
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    拓扑结构
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    通信步调
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    通信频率
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    数据与模型聚合模块
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    分布式机器学习理论
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    分布式机器学习系统
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ch4/" class="md-nav__link">
        ch4
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ch5/" class="md-nav__link">
        ch5
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    基本流程
  </a>
  
    <nav class="md-nav" aria-label="基本流程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    数据与模型划分模块
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    单机优化模块
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    通信模块
  </a>
  
    <nav class="md-nav" aria-label="通信模块">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    通信内容
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    拓扑结构
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    通信步调
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    通信频率
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    数据与模型聚合模块
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    分布式机器学习理论
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    分布式机器学习系统
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>ch3</h1>

<p>CPU由专为顺序串行处理而优化的几个核心组成，而GPU 则拥有一个由数以千计的更小、更高效的核心(专为同时处理多重任务而设计) 组成的大规模并行计算架构。GPU只有非常简单的控制逻辑并省去了缓存，适合把同样的指令流并行发送到众核上，进行海量数据的快速处理。事实证明，在浮点运算、并行计算等方面，GPU 可以提供数十倍乃至于上百倍于CPU的性能。</p>
<p>通过使用GPU，计算的并行度大大提升，很多计算任务都能得到大幅的加速(如图3.1所示)，这也正好解决了大规模机器学习的痛点。因此，在大规模机器学习(尤其是深度学习) 需求的催生下，GPU 产业得到了迅猛的发展，也使得以英伟达(NVIDIA)为代表的GPU厂商成为资本市场的宠儿。除了GPU以外，近年来FPGA和ASIC等片型也有了快速进展，对下一代人工智能任务的硬件支撑进行了有益的探索。</p>
<p><img alt="image-20230822164122664" src="https://blog-img-acking.oss-cn-beijing.aliyuncs.com/img/202308221641809.png" /></p>
<h2 id="_1">基本流程<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>之所以需要使用分布式机器学习，大体有三种情形:一是计算量太大，二是训练数据太多，三是模型规模太大。</p>
<p>对于计算量太大的情形，可以采取基于共享内存(或虚拟内存)的多线程或多机并行运算。</p>
<p>对于训练数据太多的情形，需要将数据进行划分，并分配到多个工作节点上进行训练，这样每个工作节点的局部数据都在容限之内。每个工作节点会根据局部数据训练出一个子模型，并且会按照一定的规律和其他工作节点进行通信(通信的内容主要是子模型参数或者参数更新)，以保证最终可以有效整合来自各个工作节点的训练结果并得到全局的机器学习模型。</p>
<p>对于模型规模太大的情形，则需要对模型进行划分，并且分配到不同的工作节点上进行训练。与数据并行不同，在模型并行的框架下各个子模型之间的依赖关系非常强，因为某个子模型的输出可能是另外一个子模型的输人，如果不进行中间计算结果的通信，则无法完成整个模型训练。因此，一般而言，模型并行对通信的要求较高。</p>
<p>请注意，以上三种分布式机器学习的情形在实际中通常是掺杂在一起发生的。比如，我们遇到的实际问题可能训练数据也多、模型也大、计算量也大。所以，有时候不太容易清楚地划分这些不同情形的边界。如果一定要区分它们的占比，到目前为止，数据并行还是最常见的情形，因为训练数据量过大导致训练速度慢仍是分布式机器学习领域的主要矛盾。</p>
<p>分布式机器学习都可以用下图加以描述。它包含以下几个主要模块:数据与模型划分模块、单机优化模块、通信模块以及数据与模型聚合模块。</p>
<p><img src="https://blog-img-acking.oss-cn-beijing.aliyuncs.com/img/202308221644806.png" alt="image-20230822164437726" style="zoom:67%;" /></p>
<h3 id="_2">数据与模型划分模块<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p>当我们拥有大量训练数据或者大规模机器学习模型，无法由单机完成存储和计算就需要将数据或模型进行划分并将其分配到各个工作节点上。</p>
<p>首先就数据划分而言，主要有两个操作的角度：一是<strong>对训练样本进行划分</strong>，二是<strong>对每个样本的特征维度进行划分</strong>。</p>
<p>对训练样本进行划分也有两种常用的做法：</p>
<p>第一种是基于<strong>随机采样</strong>的方法。我们把原训练集作为采样的数据源，通过<strong>有放回</strong>的方式进行随机采样，然后按照每个工作节点的容量为其分配相应数目的训练样本。这样的做法可以保证每台机器上的局部训练数据与原训练数据是独立同分布的，因此在训练的效果上有理论保证。但这样做也有弊端，首先是因为训练数据量较大、全局采样的代价比较高；其次通过采样的方式会使低频的训练样本很难被选出来，导致某些辛苦标注的训练样本并没有得到充分的利用。</p>
<p>第二种是基于<strong>置乱切分</strong>的方法。该方法将训练数据进行乱序排列，然后按照工作节点的个数将打乱后的数据顺序划分成相应的小份，随后将这些小份数据分配到各个工作节点上。每个工作节点在进行模型训练的过程中，只利用分配给自己的局部数据、并且会定期地(如每完成一个完整的训练周期)将局部数据再打乱一次。到一定阶段，还可能需要再进行全局的数据打乱和重新分配。之所以要这样做，主要目的是让各个工作节点上的训练样本更加独立并具有更加一致的分布，以满足机器学习算法对训练数据独立同分布的假设。当然，即便真的定期进行了局部和全局的乱序操作，也不见得能完全满足独立同分布的条件。有些学者对此进行了研究，他们发现数据打乱等价或者接近于无放回的随机采样，而独立同分布的假设则暗示着有放回的随机采样。</p>
<p>除了对训练样本进行划分，还可以考虑进行特征维度的划分。假设训练数据是以d维向量的方式给出的(每一维对应一种对输入样本进行刻画的特征)，我们可以将这d维特征顺序切分成K份，然后把每份特征对应的子数据集分配到K个工作节点上。<strong>维度划分需要与特定的优化方法(如标下降法)配合使用</strong>，否则如果优化算法需要同时利用分配到不同工作节点的多个维度，就会带来很大的通信代价，可能得不偿失。</p>
<p>其次，就模型划分而言，常见的做法是将机器学习模型切分成若干子模型(一部分模型参数对应于一个子模型)，然后把每个子模型放在一个工作节点上进行计算。很显然，不同的子模型之间会有一定的依赖关系，比如某个子模型的输出恰好是另外一个子模型的输人。子模型之间的依赖关系可以从机器学习模型对应的计算图上得到很好的反映。各个工作节点需要等待其输入所依赖的子模型计算完毕之后，才能开展自己的计算，而它的计算结果也将会供给依赖其输出的其他子模型进行消费。显然，不同的子模型划分方法会影响到各个工作节点之间的依赖关系和通信强度，好的划分可以降低通信强度，提高并行计算的加速比。</p>
<p>对模型进行划分时，往往需要考虑模型的结构特点。比如，对线性模型进行划分的时候，可以直接针对不同的特征维度进行划分，与基于维度的数据划分相互配合。对深层神经网络进行划分的时候，则可以考虑模型的层次结构，进行逐层的横向划分或者跨层的纵向划分。二者各有利弊。比如采用逐层的横向划分时，各子模型之间的接口清晰、实现简单，但是受到层数的限制，并行度可能不够高，并且在极端情况下，单层的模型参数可能已经超出了一个工作节点的容限。采用跨层的纵向划分，可以将模型切分成更多份，但是各子模型之间的依赖关系会更加复杂，实现起来难度更大，并目通信代价也较高。</p>
<p>除了横向和纵向这两种确定性的神经网络模型划分方式以外，也有学者<strong>尝试随机的模型划分</strong>。其基本思想是:人们发现神经网络具有一定的冗余性，给定一个神经网络，往往存在一个规模更小的网络可以达到与其类似的函数拟合效果。我们把这个小网络称为骨架网络。可以把骨架网络存储于每个工作节点，除此之外，各个工作节点互相通信的时候，还会随机传输一些属于非骨架网络的神经元参数，从而起到探索原网络全局拓扑结构的作用。骨架网络的选择可以是周期性更新的，对全局拓扑结构的探索也是动态、随机的。这样可以显著减小模型并行的通信代价，而且理论上对于模型并行的效果也有一定的保证。</p>
<h3 id="_3">单机优化模块<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>完成数据或模型划分之后，每个工作节点只需要根据分配给自己的局部训练数据和子模型来进行训练。从这个意义上讲，除去各工作节点之间相互的通信以外，在每个工作节点自身的视野里，其实基本就是一个传统的单机机器学习任务:根据属于白己的训练数据，计算经验风险(所有训练样本上的损失函数之和)，然后利用某种优化算法(如随机梯度下降法)通过最小化经验风险来学习模型的参数。</p>
<p>这部分并不是分布式机器学习所独有的模块，但是确实是“机器学习”真正发生的地方。为了更加深入地理解分布式机器学习，我们不仅要掌握主流的单机优化方法，还要了解在分布式的环境下这些单机算法的理论性质(如收敛性和泛化能力)会发生怎样的变化。</p>
<h3 id="_4">通信模块<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>当单机优化模块利用局部数据求得了本地模型的更新以后，就会涉及多机、多线程协作的问题，因为只有信息共享，才能把各个工作节点有机地组合在一起，实现一加一大于二的效果。要实现多机协作，就离不开通信。而提到通信，就需要讨论通信的内容、拓扑结构、步调和频率等。</p>
<h4 id="_5">通信内容<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h4>
<p>在数据并行的框架下，每个工作节点会学到基于局部数据的子模型。那么为了实现全局的信息共享，就<strong>需要把这些子模型或子模型的更新(如梯度)作为通信的内容</strong>。这种方式是目前应用最为广泛的分布式机器学习模式，它比较直观，并行度可以通过调节本地学习的轮数来控制。</p>
<p>虽然在数据并行的框架下，把子模型(或其更新)作为通信内容最为自然，但它并不是唯一的选择。例如，也可以基于数据交互进行分布式机器学习。在每个工作节点进行自身的训练过程中，会发现一些对于学习而言非常重要的样本(比如，当使用支持向量机作为单机学习算法时，支持向量就是重要的样本)。我们可以<strong>将这些重要样本作为通信的内容</strong>，这样就能够在多个工作节点的协作下，迅速发现全局的重要样本，加速整个训练进程。</p>
<p>在模型并行的框架下，各个工作节点之间有着很强的相互依存关系。某个子模型的输出可能是另外一个子模型的输入。因此，在这种情况下把计算的中间结果作为通信的内容就再自然不过了。这时通信链路是比较容易设计的，因为绝大部分的机器学习模型都可以用计算图或数据流的方式加以表示。那么，我们只需按照机器学习模型对应的数据流，把每个子模型完成自身计算所需要的数据通过网络传输过去即可。此类方法在算法逻辑上等价于把多个工作节点虚拟化为一个巨大的工作节点，模型划分越细，跨节点交互也越多，通信的代价越高。因此，在实战中可能需要考虑对传输的信息进行压缩。</p>
<h4 id="_6">拓扑结构<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h4>
<p>在确定了通信内容以后，还需要关心通信的拓扑结构，也就是哪些工作节点之间需要进行通信。在分布式机器学习的历史上，有如下几种主流的通信拓扑结构：</p>
<ol>
<li>
<p>基于迭代式 MapReduce/AllBeduce 的通信拓扑
   迭代式MapReduce源于大数据处理的MapReduce方法：Map操作完成数据分发和并行处理，Reduce操作完成数据的全局同步和聚合。有了MapReduce这个抽象的范式，人们只需要使用简单的原语就可以完成大规模数据的并行处理。但是当把 MapReduce 逻辑直接应用于分布式机器学习时，会遇到以下问题：</p>
</li>
<li>
<p>完全依赖硬盘I/O的数据交互方法对于迭代式的机器学习效率太低</p>
</li>
<li>
<p>在MapReduce范式下，计算过程的中间状态不能得到维持，使得反复迭代的机器学习过程无法高效衔接。</p>
<p>迭代式MapReduce 方法的提出正是为了解决以上问题，它是完全基于内存的实现，大大缩减了计算过程中的 I/O 代价；同时，考虑到机器学习任务中数据常常需要经历多次迭代，它引人了永久性存储。</p>
</li>
<li>
<p>基于参数服务器的通信拓扑
   参数服务器 (parameterserver) 的构架把工作节点和模型存储节点在逻辑上区分开来，因此可以更加灵活地支持各种不同的通信模式。各个工作节点负责处理本地的训练数据，<strong>通过参数服务器的客户端 API 与参数服务器通信，从而从参数服务器获取最新的模型参数，或者将本地训练产生的模型更新发送到参数服务器上。</strong></p>
</li>
</ol>
<p>这样做有如下好处：参数服务器将各个工作节点之间的交互过程隔离开来，取而代之的是工作节点与参数服务器之间的交互。因此，各个工作节点之间就不一定需要时刻保持同步，换言之，计算比较快的节点可以不用等待计算比较慢的节点，从而取得更高的加速比；可以采用多个参数服务器来共同维护较大的模型，这时，模型参数会被划分到多个参数服务器上进行存储，工作节点对全局参数的访问会被拆分开来，分别提交到不同的参数服务器上。这样，一方面可以平衡负载、提高通信的效率，另一方面当工作节点在训练过程中只需要访问一部分参数时(比如稀疏的模型访问)，还可以在某种意义上实现模型并行的效果。
   目前影响力比较大的几个参数服务器系统包括CMU的Parameter Server]和Petuum[17]，谷歌的DistBelief5，以及微软的Multiverso(18]</p>
<ol>
<li>基于数据流的通信拓扑
   当我们进行基于模型并行的分布式机器学习时，需要把不同子模型的更新放置在不同的工作节点上。为了更好地支持这种分布式计算，人们开始研究基于数据流的通信拓扑。在数据流系统中，计算被描述成为一个有向无环图。图中的每个节点进行数据处理或者计算，图中的每条边代表数据的流动。当两个节点位于两台不同的机器上时，它们之间便会进行通信。</li>
</ol>
<p>在典型的数据流系统中，每个节点通常有两个通信通道：控制消息流和计算数据流。其中，计算数据流主要负责接收模型训练时所需要的数据、模型参数等，再经过工作节点内部的计算单元，产生输出数据(这里的数据可以是中间计算结果，也可以是参数更新)，按需提供给下游的工作节点。控制信息流决定了工作节点应该接收什么数据接收的数据是否已经完整，自已所要做的计算是否完成，是否可以让下游节点继续计算等。在工作节点定义时，需要指定工作节点的状态转换流程，从而在需要的时候生成一些信息，通过控制消息流通知后续节点准备进人消息接收和计算的状态
   目前影响力比较大的基于数据流的系统是来自谷歌的TensorFlow</p>
<h4 id="_7">通信步调<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<p>所谓异步通信就是每个工作节点在完成一定量的本地模型训练之后不需要等待其他节点，而是直接将自己的阶段性训练结果 (例如本地模型或模型更新) 推送到参数服务器上，随即继续进行本地的模型训练(在需要的时候，会从参数服务器上拿回最新的全局模型，作为本地训练的起点)。参数服务器在逻辑上隔离了各个工作节点，使得即便个别工作节点速度慢或者出现故障也不会对整体的学习过程产生太大影响。</p>
<p>异步的通信又分为有锁和无锁两种。所谓有锁的异步通信是指虽然各个工作节点可以异步地进行本地学习，但是当它们把局部信息写人全局模型时，会通过加锁来保证数据写入的完整性，但这样可能会限制系统在参数更新方面的吞吐量。所谓无锁的异步通信是指在工作节点将局部信息写人全局模型时，不保证数据的完整性，以换取更高的吞吐量。二者各有利弊。目前比较常用的基于异步通信的算法包括异步随机梯度下降法(ASGD)、HogWild、Cyclades等。</p>
<p>异步通信虽然可以避免某些无必要的等待，但是因为各个工作节点没有同步，它们的步调可能会相差很大，这就有可能引发一个严重的“延迟”问题。举个例子，某个节点速度很快，它已经在全局模型的基础上往前训练了100 轮:而另外一个工作节点速度慢，它才在同一个全局模型的基础上往前训练了1轮。那么，当后者把一个很陈旧的本地模型(或其更新)写人全局模型的时候，可能会严重影响全局模型的收敛速度。为了解决这个问题，人们提出了一些对于延迟不太敏感的异步通信方法，如AdaptiveRevision和AdaDelay，还提出了一些从本质上补偿延迟的异步通信方法，例如带有延迟补偿的异步随机梯度下降法(DC-ASGD)</p>
<p>综上所述，同步和异步的通信方式各有利弊，也各有适用的场景。为了综合二者的好处、规避各自的问题，人们还提出了半同步的方法(如SSP2E)以及混合同步的方法。SSP的基本思想是当最快的工作节点和最慢的工作节点的时钟周期相差(延迟)不太大的时候，不去限制大家的自由发挥，工作节点各自异步地进行训练:而当系统检测到延迟过大的时候，会要求最快的工作节点停下手边的工作等待比较慢的节点，直到延迟小于某个阙值之后，才允许最快的节点继续工作。而混合同步方法则是将工作节点按照某种准则进行分组，组内的节点之间采用同步通信的模式，而组间则采用异步的通信模式。这样可以扬长避短，取得更好的分布式训练效果</p>
<h4 id="_8">通信频率<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h4>
<p>除了通信内容和通信步调以外，还有一个问题会关乎通信的代价，那就是通信的频率。</p>
<p>直观来讲，通信越频繁，各个工作节点相互协调越好，训练效果应该越有保障；然而另外一面，这也意味着通信的代价会更高，可能拖累整体训练的速度。</p>
<p>那么应该如何选择合适的通信频率呢？是应该在处理完每一个样本或每一个小批量(minibatch)之后就马上进行通信，还是在把所有本地训练数据都处理完之后再进行通信？通信的收发频率是否需要一致？不同的频率对于模型的收敛性是否有影响？</p>
<p>近年来人们对这些问题进行了一定程度的研究，其目的是根据分布式计算集群的配置(每个工作节点的计算速度、机器之间互联的网络带宽等) 以及机器学习问题自身的特点(数据大小、模型大小等)计算出一个最优的通信频率，从而取得计算代价和通信代价的最优匹配，实现最高的学习效率。</p>
<p>既然降低通信频率的目的是减小通信带宽需求，那么还有没有其他手段可以在不降低通信频率的情况下有效减小通信带宽需求呢？这就是所谓通信滤波要讨论的问题。其实，可以将降低通信频率看作时域滤波。与此对称的是所谓空域滤波，也就是从要通信的内容出发，看看能不能在当前的参数空间下尽量减少要发送的数据量。为了实现这个目的，我们有几种选择。首先是模型压缩，比如对模型矩阵作低秩分解，这样就可以减小要传输的模型大小。其次是模型量化，比如对模型参数进行低精度量化(如一比特量化s0)，或者对模型参数进行随机丢弃(weighled dropout)。</p>
<h3 id="_9">数据与模型聚合模块<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p>无论是采用哪种通信的拓扑结构，总会涉及如何将来自不同工作节点的数据、模型或其更新)进行聚合的问题。这里我们以模型聚合为例进行介绍。</p>
<p>下面我们以基于参数服务器的分布式机器学习为例进行讨论。当参数服务器收到来自不同工作节点的本地模型时，既可以选择对模型参数进行简单平均来获得全局模型也可以通过解一个一致性优化问题来获得全局模型(如ADMM、BMUF)，还可以通过模型集成(ensemble)来获得全局模型。不同的做法有各自的利。模型平均和ADMM等方法操作起来很简单，并且在学习目标是凸函数的条件下有相应的理论保证一一平均模型的精度不会比本地模型的平均精度差。</p>
<p>可是当我们面临像深度学习这样的非凸问题时，模型平均及其变种就不再具有理论保证了，尤其是如果不同的本地模型处在不同的凸子域，则平均模型的性能可能比任何一个本地模型都要差。这个时候，模型集成的优势就体现出来，它可以保证模型聚合时精度不会损失。但是，模型集成会增大模型的规模，K个模型的集成将会包含K倍的参数个数。这对于不断迭代的机器学习流程而言是不能接受的，否则将会出现所谓的“模型爆炸”现象。为了解决这个问题在模型集成之后可能需要对模型的大小进行压缩，以保证最终聚合出来的模型的规模不会越变越大。</p>
<p>另外一个问题也需要在模型聚合的时候进行讨论：<strong>是否所有的子模型都需要被聚合</strong>。首先，从全局模型的精度出发，如果某此本地模型(或其更新) 有明显的延迟，那么把这样的模型聚合起来可能会影响全局模型的最终质量。其次，从分布式机器学习的效率出发，如果某些工作节点速度比较慢，等待它们的子模型可能会拖垮整个学习过程，不如跳过它们而只对那些响应速度较快的工作节点的子模型进行聚合。这些方法已经在很多的实际系统中被使用，例如带有备份工作节点的同步随机梯度下降法以及异步ADMM。</p>
<p>反过来，当参数服务器将聚合出来的全局模型推送回每个工作节点时，这些工作节点也可以选择无条件信任全局模型(并在其基础上利用本地数据继续迭代下去)，或者只是部分地信任全局模型(只在一定概率上利用全局模型来更新本地模型)。后者代表性的算法为弹性平均随机梯度下降法(EA-SGD)。这些不同的选择会对分布式机器学习的效果以及训练速度产生不同的影响，还需要进行更加深入的研究。</p>
<p>当不同的数据/模型划分方式、不同的单机优化算法、不同的通信机制以及不同的数据/模型聚合方法组合在一起时，就会产生多种多样的分布式机器学习算法。</p>
<h3 id="_10">分布式机器学习理论<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p>其实每个模块的具体设计都会影响到分布式机器学习的整体性能。比如:</p>
<p>基于置乱切分的数据划分方法可能无法保证工作节点上的数据与原始训练数据是独立同分布的，那么这是否会影响到学习过程的收敛性以及训练所得模型的性能?</p>
<p>同步的通信方式是否会影响优化过程的收敛速度？如果有，那么这个影响与哪些因素有关？异步的通信方法受延迟的影响有多大?当延迟为 r 的时候，优化算法的收敛速度是否会打折扣，这个折扣和 r 的关系如何?</p>
<p>对这些问题的回答，一方面需要在实践中不断摸索，另一方面也需要在理论上进行界定。</p>
<h3 id="_11">分布式机器学习系统<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<p>在本书的第11章，我们将会介绍三个典型的分布式机器学习系统：</p>
<ul>
<li>基于迭代式MapReduce的机器学习系统一Spark MLlib</li>
<li>基于参数服务器的机器学习系统-Multiverso</li>
<li>基于数据流的机器学习系统一TensorFlow</li>
</ul>
<p>除了对于各个系统的基本介绍以外，我们还会针对分布式逻辑回归这个典型任务对以上系统进行实战对比，向读者展示不同的分布式机器学习系统如何使用以及各自的优缺点:</p>
<ul>
<li>
<p>从灵活性角度，MapReduce 的灵活度最低，需要遵从系统的特殊执行流程，即Map+Reduce的步骤;参数服务器灵活度最高，因为它只是提供了全局存储的服务器和访问全局存储的API，对分布式程序自身执行的流程以及具体的运算都没有作要求;而数据流系统的灵活度居中，任务需要描述成DAG的形式，但是DAG的模式相对于MapReduce还是要灵活很多</p>
</li>
<li>
<p>从运行效率角度，通常在机器数比较大并且集群状态比较复杂的情况下，基于同步逻辑的MapReduce系统的效率较低:基于参数服务器或者数据流的系统情况会好-些，因为它们默认都可以支持异步的通信逻辑。但是在真实情况下，决定系统效率的方面还包括系统的实现方式、编程语言、网络通信库和架构等</p>
</li>
<li>
<p>从处理的任务角度，Spark MLlib支持的机器学习方法一般都采用比较浅层的模型，比如逻辑回归、LDA、矩阵分解等;TensorFlow 提供了很多矩阵运算的算子和优化器，可以让用户自由搭建深度学习这类比较复杂的计算模型;Multiverso 系统对于单机学习过程没有限制，所以可以支持所有类型的学习任务，当然需要用户自已实现机器学习算法。</p>
</li>
<li>
<p>从用户使用角度，几个不同的系统都有很多现成可用的算法提供给大家。SparlMLib和TensorFlow更加完善一些，与之配套的上下游工具比较丰富，比如数据10执行引擎、数据预测等。Muiverso系统通过Pthon 绑定，对不同算法也有较好的支持不过由于生态系统相对薄弱，需要用户自已建立其他配套的功能。</p>
</li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.top", "search.suggest", "search.highlight", "navigation.expand", "search.share"], "search": "../../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>